"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{4605:(e,t,n)=>{n.r(t),n.d(t,{AssessmentPanel:()=>Q});var r=n(5155),l=n(2115),s=n(6695),a=n(5057),o=n(9367),i=n(5185),d=n(6101),c=n(6081),u=n(5845),m=n(4315),f=n(5503),x=n(1275),h=n(3655),p=n(2284),g=["PageUp","PageDown"],v=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},j="Slider",[b,y,N]=(0,p.N)(j),[S,D]=(0,c.A)(j,[N]),[M,R]=S(j),k=l.forwardRef((e,t)=>{let{name:n,min:s=0,max:a=100,step:d=1,orientation:c="horizontal",disabled:m=!1,minStepsBetweenThumbs:f=0,defaultValue:x=[s],value:h,onValueChange:p=()=>{},onValueCommit:w=()=>{},inverted:j=!1,form:y,...N}=e,S=l.useRef(new Set),D=l.useRef(0),R="horizontal"===c,[k=[],P]=(0,u.i)({prop:h,defaultProp:x,onChange:e=>{var t;null===(t=[...S.current][D.current])||void 0===t||t.focus(),p(e)}}),E=l.useRef(k);function C(e,t){let{commit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1},r=(String(d).split(".")[1]||"").length,l=function(e,t){let n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-s)/d)*d+s,r),i=(0,o.q)(l,[s,a]);P(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,i,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,n)=>e[n+1]-t))>=t;return!0}(r,f*d))return e;{D.current=r.indexOf(i);let t=String(r)!==String(e);return t&&n&&w(r),t?r:e}})}return(0,r.jsx)(M,{scope:e.__scopeSlider,name:n,disabled:m,min:s,max:a,valueIndexToChangeRef:D,thumbs:S.current,values:k,orientation:c,form:y,children:(0,r.jsx)(b.Provider,{scope:e.__scopeSlider,children:(0,r.jsx)(b.Slot,{scope:e.__scopeSlider,children:(0,r.jsx)(R?A:_,{"aria-disabled":m,"data-disabled":m?"":void 0,...N,ref:t,onPointerDown:(0,i.m)(N.onPointerDown,()=>{m||(E.current=k)}),min:s,max:a,inverted:j,onSlideStart:m?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(k,e);C(e,t)},onSlideMove:m?void 0:function(e){C(e,D.current)},onSlideEnd:m?void 0:function(){let e=E.current[D.current];k[D.current]!==e&&w(k)},onHomeKeyDown:()=>!m&&C(s,0,{commit:!0}),onEndKeyDown:()=>!m&&C(a,k.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!m){let e=g.includes(t.key)||t.shiftKey&&v.includes(t.key),r=D.current;C(k[r]+d*(e?10:1)*n,r,{commit:!0})}}})})})})});k.displayName=j;var[P,E]=S(j,{startEdge:"left",endEdge:"right",size:"width",direction:1}),A=l.forwardRef((e,t)=>{let{min:n,max:s,dir:a,inverted:o,onSlideStart:i,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...x}=e,[h,p]=l.useState(null),g=(0,d.s)(t,e=>p(e)),v=l.useRef(void 0),j=(0,m.jH)(a),b="ltr"===j,y=b&&!o||!b&&o;function N(e){let t=v.current||h.getBoundingClientRect(),r=q([0,t.width],y?[n,s]:[s,n]);return v.current=t,r(e-t.left)}return(0,r.jsx)(P,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,r.jsx)(C,{dir:j,"data-orientation":"horizontal",...x,ref:g,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=N(e.clientX);null==i||i(t)},onSlideMove:e=>{let t=N(e.clientX);null==c||c(t)},onSlideEnd:()=>{v.current=void 0,null==u||u()},onStepKeyDown:e=>{let t=w[y?"from-left":"from-right"].includes(e.key);null==f||f({event:e,direction:t?-1:1})}})})}),_=l.forwardRef((e,t)=>{let{min:n,max:s,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:c,onStepKeyDown:u,...m}=e,f=l.useRef(null),x=(0,d.s)(t,f),h=l.useRef(void 0),p=!a;function g(e){let t=h.current||f.current.getBoundingClientRect(),r=q([0,t.height],p?[s,n]:[n,s]);return h.current=t,r(e-t.top)}return(0,r.jsx)(P,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:(0,r.jsx)(C,{"data-orientation":"vertical",...m,ref:x,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=g(e.clientY);null==o||o(t)},onSlideMove:e=>{let t=g(e.clientY);null==i||i(t)},onSlideEnd:()=>{h.current=void 0,null==c||c()},onStepKeyDown:e=>{let t=w[p?"from-bottom":"from-top"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}})})}),C=l.forwardRef((e,t)=>{let{__scopeSlider:n,onSlideStart:l,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:d,onStepKeyDown:c,...u}=e,m=R(j,n);return(0,r.jsx)(h.sG.span,{...u,ref:t,onKeyDown:(0,i.m)(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):g.concat(v).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,i.m)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():l(e)}),onPointerMove:(0,i.m)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,i.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))})})}),H="SliderTrack",I=l.forwardRef((e,t)=>{let{__scopeSlider:n,...l}=e,s=R(H,n);return(0,r.jsx)(h.sG.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...l,ref:t})});I.displayName=H;var K="SliderRange",L=l.forwardRef((e,t)=>{let{__scopeSlider:n,...s}=e,a=R(K,n),o=E(K,n),i=l.useRef(null),c=(0,d.s)(t,i),u=a.values.length,m=a.values.map(e=>Z(e,a.min,a.max)),f=u>1?Math.min(...m):0,x=100-Math.max(...m);return(0,r.jsx)(h.sG.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:c,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:x+"%"}})});L.displayName=K;var z="SliderThumb",T=l.forwardRef((e,t)=>{let n=y(e.__scopeSlider),[s,a]=l.useState(null),o=(0,d.s)(t,e=>a(e)),i=l.useMemo(()=>s?n().findIndex(e=>e.ref.current===s):-1,[n,s]);return(0,r.jsx)(U,{...e,ref:o,index:i})}),U=l.forwardRef((e,t)=>{let{__scopeSlider:n,index:s,name:a,...o}=e,c=R(z,n),u=E(z,n),[m,f]=l.useState(null),p=(0,d.s)(t,e=>f(e)),g=!m||c.form||!!m.closest("form"),v=(0,x.X)(m),w=c.values[s],j=void 0===w?0:Z(w,c.min,c.max),y=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(s,c.values.length),N=null==v?void 0:v[u.size],S=N?function(e,t,n){let r=e/2,l=q([0,50],[0,r]);return(r-l(t)*n)*n}(N,j,u.direction):0;return l.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),(0,r.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:"calc(".concat(j,"% + ").concat(S,"px)")},children:[(0,r.jsx)(b.ItemSlot,{scope:e.__scopeSlider,children:(0,r.jsx)(h.sG.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":c.min,"aria-valuenow":w,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:p,style:void 0===w?{display:"none"}:e.style,onFocus:(0,i.m)(e.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),g&&(0,r.jsx)(B,{name:null!=a?a:c.name?c.name+(c.values.length>1?"[]":""):void 0,form:c.form,value:w},s)]})});T.displayName=z;var B=e=>{let{value:t,...n}=e,s=l.useRef(null),a=(0,f.Z)(t);return l.useEffect(()=>{let e=s.current,n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(a!==t&&n){let r=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[a,t]),(0,r.jsx)("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function Z(e,t,n){return(0,o.q)(100/(n-t)*(e-t),[0,100])}function q(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var G=n(9434);let O=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsxs)(k,{ref:t,className:(0,G.cn)("relative flex w-full touch-none select-none items-center",n),...l,children:[(0,r.jsx)(I,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(L,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(T,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});O.displayName=k.displayName;var V=n(4944),X=n(2346),F=n(9773),Y=n(157);let J=(0,Y.A)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),W=(0,Y.A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function Q(e){let{questions:t,sliderValues:n,onSliderValuesChange:o,robotsAssessedCount:i,totalRobotsToAssess:d,isAssessmentActive:c}=e,u=(e,t)=>{let r=[...n];r[e]=t[0],o(r)},m=(0,l.useMemo)(()=>n&&0!==n.length?n.filter(e=>e!==F.B).length:0,[n]),f=d>0?Math.min(100,Math.round(i/d*100)):0;return(0,r.jsxs)(s.Zp,{className:"shadow-lg rounded-lg overflow-hidden flex flex-col",children:[(0,r.jsxs)(s.aR,{className:"bg-card-foreground/5",children:[(0,r.jsx)(s.ZB,{className:"text-xl font-semibold text-primary",children:"能力评估"}),(0,r.jsx)(s.BT,{className:"text-sm text-muted-foreground",children:"请根据以下标准，对机器人的各项潜能进行评分。"}),(0,r.jsxs)("div",{className:"mt-2 px-2 py-1 bg-primary/5 rounded-lg flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(J,{className:"h-3.5 w-3.5 mr-1 text-red-500"}),(0,r.jsx)("span",{children:"完全不同意 (0)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"完全同意 (100)"}),(0,r.jsx)(W,{className:"h-3.5 w-3.5 ml-1 text-green-500"})]})]})]}),(0,r.jsx)(s.Wu,{className:"flex-grow space-y-6 p-6 overflow-y-auto max-h-[calc(100vh-24rem)]",children:t.map((e,l)=>(0,r.jsxs)("div",{className:"space-y-3 pt-2 first:pt-0",children:[(0,r.jsx)(a.J,{htmlFor:e.id,className:"text-base font-medium block text-foreground",children:e.text}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(J,{className:"h-3 w-3 mr-1 text-red-500/80"}),(0,r.jsx)("span",{children:"完全不同意"})]}),(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)("span",{children:"完全同意"}),(0,r.jsx)(W,{className:"h-3 w-3 ml-1 text-green-500/80"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(O,{id:e.id,min:0,max:100,step:1,value:[n[l]],onValueChange:e=>u(l,e),className:"flex-grow","aria-label":"".concat(e.text," slider")}),(0,r.jsxs)("span",{className:"text-sm font-semibold w-12 text-right text-accent tabular-nums",children:[n[l],"%"]})]})]}),l<t.length-1&&(0,r.jsx)(X.w,{className:"mt-4"})]},e.id))}),(0,r.jsx)(X.w,{}),(0,r.jsxs)(s.wL,{className:"flex flex-col items-start space-y-4 p-6 bg-card-foreground/5",children:[c&&t.length>0&&n.length===t.length&&(0,r.jsxs)("div",{className:"w-full space-y-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-primary",children:"当前答题进度"}),(0,r.jsxs)("div",{className:"text-4xl font-bold text-accent text-center py-2",children:[m," / ",t.length]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground pt-1 text-center",children:["已调整 ",m," 个问题的评分，共 ",t.length," 个问题。"]})]}),c&&t.length>0&&n.length>0&&d>0&&(0,r.jsx)(X.w,{className:"my-2"}),d>0&&(0,r.jsxs)("div",{className:"w-full space-y-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-primary",children:"总评估进度"}),(0,r.jsxs)("div",{className:"text-center py-1",children:[(0,r.jsx)("span",{className:"text-2xl font-bold text-accent",children:i}),(0,r.jsxs)("span",{className:"text-lg text-muted-foreground",children:[" / ",d," 个机器人"]}),i<=d&&d>0&&(0,r.jsxs)("span",{className:"ml-2 text-muted-foreground",children:["(",Math.round(i/d*100),"%)"]}),i>d&&d>0&&(0,r.jsxs)("span",{className:"ml-2 text-muted-foreground",children:["(",Math.round(i/d*100),"%)"]})]}),(0,r.jsx)(V.k,{value:f,className:"w-full h-3 rounded-full","aria-label":"总评估进度条"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground pt-1",children:"已完成评估的机器人数量占计划总数的比例。"})]})]})]})}}}]);